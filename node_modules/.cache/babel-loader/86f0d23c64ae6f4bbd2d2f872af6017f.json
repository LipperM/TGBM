{"remainingRequest":"E:\\Web\\TGBM\\node_modules\\babel-loader\\lib\\index.js!E:\\Web\\TGBM\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\Web\\TGBM\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Web\\TGBM\\src\\components\\main-view.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Web\\TGBM\\src\\components\\main-view.vue","mtime":1646280478847},{"path":"E:\\Web\\TGBM\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646100400721},{"path":"E:\\Web\\TGBM\\node_modules\\babel-loader\\lib\\index.js","mtime":1646100404574},{"path":"E:\\Web\\TGBM\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646100400721},{"path":"E:\\Web\\TGBM\\node_modules\\vue-loader\\lib\\index.js","mtime":1646100403862}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TopSwitcher from \"./top-switcher.vue\";\nimport ConfigView from \"./config-view.vue\";\nimport ConfigNomal from \"./config-noaml.vue\";\nimport TableLog from \"./table-log.vue\";\nimport SockJS from 'sockjs-client';\nimport Stomp from 'stompjs';\nexport default {\n  name: 'MainView',\n  components: {\n    TopSwitcher: TopSwitcher,\n    ConfigView: ConfigView,\n    ConfigNomal: ConfigNomal,\n    TableLog: TableLog\n  },\n  data: function data() {\n    return {\n      stompClient: '',\n      headers: {},\n      viewtype: 0,\n      host: '',\n      currentPrice: 0,\n      currentNPrice: 0,\n      priceValue: 0,\n      priceType: true,\n      currentTotle: 0,\n      pricePool: 0,\n      lable001: '价格',\n      symbol: '-',\n      symbol2: '-',\n      t1Sort: {\n        prop: 'blockSeq',\n        order: 'descending' //ascending   descending\n\n      },\n      t2Sort: {\n        prop: 'blockSeq',\n        order: 'descending' //ascending   descending\n\n      },\n      table1Key: [],\n      table2Key: [],\n      table3Key: [],\n      table1: [{\n        prop: 'blockSeq',\n        lable: \"区块\"\n      }, {\n        prop: 'tradeType',\n        lable: \"类型\"\n      }, {\n        prop: 'tokenAmount',\n        lable: \"token\"\n      }, {\n        prop: 'assetAmount',\n        lable: \"资产\"\n      }, {\n        prop: 'price',\n        lable: \"价格\"\n      }, {\n        prop: 'tokenBalance',\n        lable: \"持有\"\n      }],\n      table2: [{\n        prop: 'blockSeq',\n        lable: \"区块\"\n      }, {\n        prop: 'tradeType',\n        lable: \"类型\"\n      }, {\n        prop: 'tokenAmount',\n        lable: \"token\"\n      }, {\n        prop: 'assetAmount',\n        lable: \"资产\"\n      }, {\n        prop: 'price',\n        lable: \"价格\"\n      }],\n      table3: [{\n        prop: 'timestamp',\n        lable: \"时间\"\n      }, {\n        prop: 'txHash',\n        lable: \"txHash\"\n      }, {\n        prop: 'method',\n        lable: \"method\"\n      }, {\n        prop: 'params',\n        lable: \"参数\"\n      }],\n      list1: [],\n      list2: [],\n      list3: []\n    };\n  },\n  props: {\n    msg: {\n      type: String,\n      default: function _default() {\n        return \"========\";\n      }\n    }\n  },\n  created: function created() {\n    this.host = \"http://localhost/\";\n\n    if (window.config && window.config.host) {\n      this.host = window.config.debug ? window.config.debughost : window.config.host;\n    }\n  },\n  destroyed: function destroyed() {\n    this.socketclose();\n  },\n  mounted: function mounted() {\n    this.initSocket();\n  },\n  methods: {\n    switchTab: function switchTab(index) {\n      this.viewtype = index;\n    },\n    setPriceType: function setPriceType() {\n      this.priceType = !this.priceType;\n      var temp = {\n        prop: 'price',\n        lable: \"价格\"\n      };\n      this.priceValue = this.currentPrice;\n\n      if (!this.priceType) {\n        temp = {\n          prop: 'priceReversed',\n          lable: \"价格(*)\"\n        };\n        this.priceValue = this.currentNPrice;\n      }\n\n      this.lable001 = this.priceType ? \"价格\" : \"价格(*)\";\n      this.table1[4].lable = temp.lable;\n      this.table1[4].prop = temp.prop;\n      this.table2[4].lable = temp.lable;\n      this.table2[4].prop = temp.prop;\n      this.$refs.tabelT1.inval();\n      this.$refs.tabelT2.inval();\n    },\n    initSocket: function initSocket() {\n      var _this = this;\n\n      var self = this;\n      var wsuri = this.host + \"/ws/\";\n      var target = '/topic/monitor';\n      var socket = new SockJS(wsuri);\n      this.stompClient = Stomp.over(socket);\n      this.headers = {\n        Authorization: ''\n      };\n      var hd = this.headers;\n      this.stompClient.connect(hd, function () {\n        _this.stompClient.subscribe(target, function (msg) {\n          // console.log(msg);\n          self.socketonmessage(msg.body);\n        }, hd);\n      }, function (err) {\n        console.log('失败', err);\n\n        _this.delayReconnet(Math.random() * 3000 + 2000);\n      }); //this.stompClient.onclose\n      // console.log(this.stompClient);\n    },\n    socketonopen: function socketonopen() {\n      console.log(\"WebSocket success\");\n    },\n    socketonerror: function socketonerror(e) {\n      console.log(\"WebSocket error\");\n      console.log(e);\n    },\n    socketonmessage: function socketonmessage(e) {\n      // console.log(e);\n      // return;\n      var data = JSON.parse(e);\n      console.log(data);\n\n      switch (data.eventType) {\n        case \"token\":\n          if (data.blockSeq && this.table2Key.indexOf(data.blockSeq) < 0) {\n            this.list2.push(data);\n            this.table2Key.push(data.blockSeq);\n          }\n\n          this.currentPrice = data.price;\n          this.currentNPrice = data.priceReversed;\n          this.priceValue = this.priceType ? this.currentPrice : this.currentNPrice; //\tthis.symbol=data\n\n          break;\n\n        case 'trade':\n          if (data.blockSeq && this.table1Key.indexOf(data.blockSeq) < 0) {\n            this.list1.push(data);\n            this.table1Key.push(data.blockSeq);\n          }\n\n          if (data.tokenBalance) this.currentTotle = data.tokenBalance; //\tthis.symbol2=data\n\n          break;\n\n        case 'owner':\n          if (data.txHash && this.table3Key.indexOf(data.txHash) < 0) {\n            this.list3.push(data);\n            this.table3Key.push(data.txHash);\n          }\n\n          break;\n      }\n    },\n    socketsend: function socketsend(agentData) {\n      //数据发送 \n      if (!this.stompClient) return;\n      var hd = this.headers;\n      var target = \"/app/chat.addUser\";\n      this.stompClient.send(target, hd, JSON.stringify(agentData));\n    },\n    socketclose: function socketclose(e) {\n      console.log(\"connection closed\");\n\n      if (this.stompClient) {\n        this.stompClient.disconnect();\n      }\n    },\n    delayReconnet: function delayReconnet(delay) {\n      var _this2 = this;\n\n      this.socketclose();\n      setTimeout(function () {\n        _this2.initSocket();\n      }, delay);\n    },\n    sendCmd: function sendCmd(type, value) {\n      // console.log(type, value);\n      var cmd = type.toLowerCase();\n      var parameter = {};\n\n      switch (cmd) {\n        case 'getconfig':\n          break;\n\n        case 'getsellconfig':\n          break;\n\n        case 'saveconfig':\n          parameter = value;\n          break;\n\n        case 'activeconfig':\n          parameter = {\n            tokenAddress: value.tokenAddress\n          };\n          break;\n\n        case 'getactiveconfig':\n          break;\n\n        case 'delconfig':\n          parameter = {\n            tokenAddress: value.tokenAddress\n          };\n          break;\n\n        case 'sellconfig':\n          parameter = value;\n          break;\n\n        case 'manualsell':\n          parameter = value;\n          break;\n\n        case 'sendfee':\n          parameter = value;\n          break;\n\n        case 'workernum':\n          break;\n\n        case 'createworkers':\n          break;\n\n        case 'batchapprove':\n          break;\n\n        case 'manualbuy':\n          break;\n\n        case 'startlisten':\n          break;\n\n        case 'stoplisten':\n          break;\n\n        case 'saveconfigonchain':\n          break;\n      }\n\n      if (parameter.launchTime) {\n        if (typeof parameter.launchTime != 'number') parameter.launchTime = Date.parse(parameter.launchTime);\n      }\n\n      this.excuteCmd(this.host + type, type, parameter, this.responseCall);\n    },\n    excuteCmd: function excuteCmd(target, cmd, value, callback) {\n      var config = {\n        baseURL: this.host,\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8'\n        }\n      };\n      var self = this; // console.log(JSON.stringify(value));\n\n      this.$axios.post(target, JSON.stringify(value), config).then(function (response) {\n        if (response.status == 200) {\n          // callback(response.data);\n          if (callback) callback(self, cmd, response.data);\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    responseCall: function responseCall(target, cmd, data) {\n      if (!cmd || !data) return;\n      var tempcmd = cmd.toLowerCase();\n\n      switch (tempcmd) {\n        case 'getconfig':\n          this.$refs.baseConfigView.inval(data.data);\n          this.$refs.nomalConfigView.inval(data.data);\n          break;\n\n        case 'getsellconfig':\n          this.$refs.nomalConfigView.inval(data.data);\n          break;\n\n        case 'workernum':\n          this.$refs.nomalConfigView.inval(data.data);\n          break;\n\n        case 'saveconfig':\n          if (data.code.toUpperCase() == \"SUCCESS\") {\n            this.upateConfig();\n          }\n\n          this.noti('保存提示', data.code);\n          break;\n\n        case 'activeconfig':\n          this.noti('激活提示', data.code);\n          break;\n\n        case 'delconfig':\n          this.upateConfig();\n          this.noti('删除提示', data.code);\n          break;\n\n        case 'sellconfig':\n          this.noti('修改自动卖出', data.code);\n          break;\n\n        case 'manualsell':\n          this.noti('手动卖出', data.code);\n          break;\n\n        case 'sendfee':\n          this.noti('发送手续费', data.code);\n          break;\n\n        case 'createworkers':\n          this.noti('创建小号', data.code);\n          break;\n\n        case 'batchapprove':\n          this.noti('批量授权', data.code);\n          break;\n\n        case 'manualbuy':\n          this.noti('手动买入', data.code);\n          break;\n\n        case 'startlisten':\n          this.noti('开启监听', data.code);\n          break;\n\n        case 'stoplisten':\n          this.noti('停止监听', data.code);\n          break;\n\n        case 'saveconfigonchain':\n          this.noti('配置上链', data.code);\n          break;\n\n        default:\n          this.noti('其他操作', data.code);\n          break;\n      }\n    },\n    noti: function noti(title, msg) {\n      console.log(title, msg);\n\n      if (msg.toUpperCase() == 'SUCCESS') {\n        msg = \"成功执行\";\n      }\n\n      if (msg.toUpperCase() == 'INTERNAL_ERROR') {\n        msg = \"未知错误\";\n      }\n\n      if (msg.toUpperCase() == 'WEB3_ERROR') {\n        msg = \"WEB3 链上错误\";\n      }\n\n      this.$notify({\n        title: title,\n        message: msg\n      });\n    },\n    upateConfig: function upateConfig() {\n      // this.$emit('submit', 'getConfig', this.form);\n      this.sendCmd('getConfig', null);\n    },\n    changeForm: function changeForm(form) {\n      this.symbol = form.tokenSymbol;\n      this.symbol2 = form.assetSymbol;\n    }\n  }\n};",{"version":3,"sources":["main-view.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"content full\">\r\n\r\n\t\t<el-row :gutter=\"10\" class=\"full\">\r\n\t\t\t<el-col :span=\"5\" class=\"left\">\r\n\t\t\t\t<TopSwitcher @click=\"switchTab\"></TopSwitcher>\r\n\r\n\t\t\t\t<ConfigView ref=\"baseConfigView\" v-show=\"viewtype == 0\" class=\"config-view\" @submit='sendCmd'\r\n\t\t\t\t\t@change=\"changeForm\">\r\n\t\t\t\t</ConfigView>\r\n\t\t\t\t<ConfigNomal ref=\"nomalConfigView\" v-show=\"viewtype == 1\" class=\"config-nomal\" @submit='sendCmd'>\r\n\t\t\t\t</ConfigNomal>\r\n\r\n\t\t\t</el-col>\r\n\r\n\t\t\t<el-col :span=\"19\" class=\"full-h\">\r\n\r\n\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"18\" class=\"t1\">\r\n\t\t\t\t\t\t<TableLog ref='tabelT1' :sort=\"t1Sort\" title=\"成交监控\" :fields=\"table1\" :dataList=\"list1\">\r\n\t\t\t\t\t\t</TableLog>\r\n\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\r\n\t\t\t\t\t\t<div class=\"layout-center view-tip\">\r\n\t\t\t\t\t\t\t<i class=\"el-icon-sort bt-sort\" @click=\"setPriceType\"></i>\r\n\t\t\t\t\t\t\t<h4>持有</h4>\r\n\t\t\t\t\t\t\t<p class=\"view-tip-color\">{{currentTotle}} <span>【{{symbol}}】</span></p>\r\n\t\t\t\t\t\t\t<p class=\"view-tip-color\">{{currentTotle * currentNPrice}} <span>【{{symbol2}}】</span></p>\r\n\r\n\t\t\t\t\t\t\t<h4>资金池</h4>\r\n\t\t\t\t\t\t\t<p class=\"view-tip-color\">{{pricePool}} <span>【{{symbol2}}】</span></p>\r\n\t\t\t\t\t\t\t<h4>{{lable001}}</h4>\r\n\t\t\t\t\t\t\t<p class=\"view-tip-color\">{{priceValue}} <span></span></p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t\t<!--<el-row class=\"t1\">\r\n\t\t\t\t\t<TableLog title=\"成交监控\" :files=\"table1\" :dataList=\"list1\"></TableLog>\r\n\t\t\t\t</el-row> -->\r\n\r\n\r\n\t\t\t\t<el-row :gutter=\"10\" class=\"t-d\">\r\n\r\n\t\t\t\t\t<el-col :span=\"12\" class=\"t2\">\r\n\t\t\t\t\t\t<TableLog ref='tabelT2' title=\"代币监控\" :sort=\"t2Sort\" :fields=\"table2\" :dataList=\"list2\">\r\n\t\t\t\t\t\t</TableLog>\r\n\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t\t<el-col :span=\"12\" class=\"t3\">\r\n\t\t\t\t\t\t<TableLog ref='tabelT3' title=\"项目方监控\" mkey=\"timestamp\" :fields=\"table3\" :dataList=\"list3\">\r\n\t\t\t\t\t\t</TableLog>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t</el-col>\r\n\r\n\t\t</el-row>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport TopSwitcher from './top-switcher.vue'\r\n\timport ConfigView from './config-view.vue'\r\n\timport ConfigNomal from './config-noaml.vue'\r\n\timport TableLog from './table-log.vue'\r\n\timport SockJS from 'sockjs-client'\r\n\timport Stomp from 'stompjs'\r\n\r\n\texport default {\r\n\t\tname: 'MainView',\r\n\t\tcomponents: {\r\n\t\t\tTopSwitcher,\r\n\t\t\tConfigView,\r\n\t\t\tConfigNomal,\r\n\t\t\tTableLog\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstompClient: '',\r\n\t\t\t\theaders: {},\r\n\t\t\t\tviewtype: 0,\r\n\t\t\t\thost: '',\r\n\t\t\t\tcurrentPrice: 0,\r\n\t\t\t\tcurrentNPrice: 0,\r\n\t\t\t\tpriceValue: 0,\r\n\t\t\t\tpriceType: true,\r\n\t\t\t\tcurrentTotle: 0,\r\n\r\n\t\t\t\tpricePool: 0,\r\n\t\t\t\tlable001: '价格',\r\n\t\t\t\tsymbol: '-',\r\n\t\t\t\tsymbol2: '-',\r\n\r\n\t\t\t\tt1Sort: {\r\n\t\t\t\t\tprop: 'blockSeq',\r\n\t\t\t\t\torder: 'descending', //ascending   descending\r\n\t\t\t\t},\r\n\t\t\t\tt2Sort: {\r\n\t\t\t\t\tprop: 'blockSeq',\r\n\t\t\t\t\torder: 'descending', //ascending   descending\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\ttable1Key: [],\r\n\t\t\t\ttable2Key: [],\r\n\t\t\t\ttable3Key: [],\r\n\r\n\r\n\t\t\t\ttable1: [{\r\n\t\t\t\t\t\tprop: 'blockSeq',\r\n\t\t\t\t\t\tlable: \"区块\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'tradeType',\r\n\t\t\t\t\t\tlable: \"类型\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'tokenAmount',\r\n\t\t\t\t\t\tlable: \"token\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'assetAmount',\r\n\t\t\t\t\t\tlable: \"资产\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'price',\r\n\t\t\t\t\t\tlable: \"价格\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'tokenBalance',\r\n\t\t\t\t\t\tlable: \"持有\"\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\ttable2: [{\r\n\t\t\t\t\t\tprop: 'blockSeq',\r\n\t\t\t\t\t\tlable: \"区块\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'tradeType',\r\n\t\t\t\t\t\tlable: \"类型\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'tokenAmount',\r\n\t\t\t\t\t\tlable: \"token\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'assetAmount',\r\n\t\t\t\t\t\tlable: \"资产\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'price',\r\n\t\t\t\t\t\tlable: \"价格\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\ttable3: [{\r\n\t\t\t\t\t\tprop: 'timestamp',\r\n\t\t\t\t\t\tlable: \"时间\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'txHash',\r\n\t\t\t\t\t\tlable: \"txHash\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'method',\r\n\t\t\t\t\t\tlable: \"method\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprop: 'params',\r\n\t\t\t\t\t\tlable: \"参数\"\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tlist1: [],\r\n\t\t\t\tlist2: [],\r\n\t\t\t\tlist3: [],\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tprops: {\r\n\t\t\tmsg: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: function() {\r\n\t\t\t\t\treturn \"========\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreated() {\r\n\t\t\tthis.host = \"http://localhost/\";\r\n\r\n\t\t\tif (window.config && window.config.host) {\r\n\t\t\t\tthis.host = window.config.debug ? window.config.debughost : window.config.host;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdestroyed: function() {\r\n\t\t\tthis.socketclose();\r\n\t\t},\r\n\r\n\t\tmounted() {\r\n\t\t\tthis.initSocket();\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tswitchTab(index) {\r\n\t\t\t\tthis.viewtype = index;\r\n\t\t\t},\r\n\t\t\tsetPriceType() {\r\n\t\t\t\tthis.priceType = !this.priceType;\r\n\t\t\t\tlet temp = {\r\n\t\t\t\t\tprop: 'price',\r\n\t\t\t\t\tlable: \"价格\"\r\n\t\t\t\t}\r\n\t\t\t\tthis.priceValue = this.currentPrice;\r\n\t\t\t\tif (!this.priceType) {\r\n\t\t\t\t\ttemp = {\r\n\t\t\t\t\t\tprop: 'priceReversed',\r\n\t\t\t\t\t\tlable: \"价格(*)\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.priceValue = this.currentNPrice;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthis.lable001 = this.priceType ? \"价格\" : \"价格(*)\";\r\n\r\n\t\t\t\tthis.table1[4].lable = temp.lable;\r\n\t\t\t\tthis.table1[4].prop = temp.prop;\r\n\r\n\t\t\t\tthis.table2[4].lable = temp.lable;\r\n\t\t\t\tthis.table2[4].prop = temp.prop;\r\n\r\n\t\t\t\tthis.$refs.tabelT1.inval();\r\n\t\t\t\tthis.$refs.tabelT2.inval();\r\n\r\n\r\n\r\n\t\t\t},\r\n\r\n\t\t\tinitSocket() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tconst wsuri = this.host + \"/ws/\";\r\n\t\t\t\tlet target = '/topic/monitor';\r\n\t\t\t\tlet socket = new SockJS(wsuri);\r\n\t\t\t\tthis.stompClient = Stomp.over(socket);\r\n\r\n\t\t\t\tthis.headers = {\r\n\t\t\t\t\tAuthorization: ''\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet hd = this.headers;\r\n\t\t\t\tthis.stompClient.connect(hd, () => {\r\n\t\t\t\t\tthis.stompClient.subscribe(target, (msg) => {\r\n\r\n\t\t\t\t\t\t// console.log(msg);\r\n\t\t\t\t\t\tself.socketonmessage(msg.body);\r\n\r\n\t\t\t\t\t}, hd);\r\n\r\n\t\t\t\t}, (err) => {\r\n\t\t\t\t\tconsole.log('失败', err);\r\n\t\t\t\t\tthis.delayReconnet(Math.random() * 3000 + 2000);\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\t//this.stompClient.onclose\r\n\t\t\t\t// console.log(this.stompClient);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsocketonopen() {\r\n\t\t\t\tconsole.log(\"WebSocket success\");\r\n\t\t\t},\r\n\r\n\t\t\tsocketonerror(e) {\r\n\t\t\t\tconsole.log(\"WebSocket error\");\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t},\r\n\r\n\t\t\tsocketonmessage(e) {\r\n\t\t\t\t// console.log(e);\r\n\t\t\t\t// return;\r\n\t\t\t\tconst data = JSON.parse(e);\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tswitch (data.eventType) {\r\n\t\t\t\t\tcase \"token\":\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif (data.blockSeq && this.table2Key.indexOf(data.blockSeq) < 0) {\r\n\t\t\t\t\t\t\tthis.list2.push(data);\r\n\t\t\t\t\t\t\tthis.table2Key.push(data.blockSeq);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.currentPrice = data.price;\r\n\t\t\t\t\t\tthis.currentNPrice = data.priceReversed;\r\n\t\t\t\t\t\tthis.priceValue = this.priceType ? this.currentPrice : this.currentNPrice;\r\n\t\t\t\t\t\t//\tthis.symbol=data\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tcase 'trade':\r\n\t\t\t\t\t\tif (data.blockSeq && this.table1Key.indexOf(data.blockSeq) < 0) {\r\n\t\t\t\t\t\t\tthis.list1.push(data);\r\n\t\t\t\t\t\t\tthis.table1Key.push(data.blockSeq);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (data.tokenBalance) this.currentTotle = data.tokenBalance;\r\n\t\t\t\t\t\t//\tthis.symbol2=data\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'owner':\r\n\r\n\t\t\t\t\t\tif (data.txHash && this.table3Key.indexOf(data.txHash) < 0) {\r\n\t\t\t\t\t\t\tthis.list3.push(data);\r\n\t\t\t\t\t\t\tthis.table3Key.push(data.txHash);\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsocketsend(agentData) { //数据发送 \r\n\t\t\t\tif (!this.stompClient) return;\r\n\t\t\t\tlet hd = this.headers;\r\n\t\t\t\tvar target = \"/app/chat.addUser\";\r\n\t\t\t\tthis.stompClient.send(target, hd,\r\n\t\t\t\t\tJSON.stringify(agentData),\r\n\t\t\t\t)\r\n\t\t\t},\r\n\r\n\t\t\tsocketclose(e) {\r\n\t\t\t\tconsole.log(\"connection closed\");\r\n\t\t\t\tif (this.stompClient) {\r\n\t\t\t\t\tthis.stompClient.disconnect();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tdelayReconnet(delay) {\r\n\t\t\t\tthis.socketclose();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.initSocket();\r\n\t\t\t\t}, delay);\r\n\t\t\t},\r\n\r\n\t\t\tsendCmd(type, value) {\r\n\t\t\t\t// console.log(type, value);\r\n\t\t\t\tlet cmd = type.toLowerCase();\r\n\t\t\t\tlet parameter = {};\r\n\t\t\t\tswitch (cmd) {\r\n\t\t\t\t\tcase 'getconfig':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'getsellconfig':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'saveconfig':\r\n\t\t\t\t\t\tparameter = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'activeconfig':\r\n\t\t\t\t\t\tparameter = {\r\n\t\t\t\t\t\t\ttokenAddress: value.tokenAddress\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'getactiveconfig':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'delconfig':\r\n\t\t\t\t\t\tparameter = {\r\n\t\t\t\t\t\t\ttokenAddress: value.tokenAddress\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'sellconfig':\r\n\t\t\t\t\t\tparameter = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'manualsell':\r\n\t\t\t\t\t\tparameter = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'sendfee':\r\n\t\t\t\t\t\tparameter = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'workernum':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'createworkers':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'batchapprove':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'manualbuy':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'startlisten':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'stoplisten':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'saveconfigonchain':\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (parameter.launchTime) {\r\n\t\t\t\t\tif (typeof(parameter.launchTime) != 'number') parameter.launchTime = Date.parse(parameter.launchTime);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.excuteCmd(this.host + type, type, parameter, this.responseCall);\r\n\t\t\t},\r\n\r\n\t\t\texcuteCmd(target, cmd, value, callback) {\r\n\r\n\t\t\t\tvar config = {\r\n\t\t\t\t\tbaseURL: this.host,\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json;charset=utf-8'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tlet self = this;\r\n\t\t\t\t// console.log(JSON.stringify(value));\r\n\t\t\t\tthis.$axios.post(target, JSON.stringify(value), config)\r\n\t\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\t\tif (response.status == 200) {\r\n\t\t\t\t\t\t\t// callback(response.data);\r\n\t\t\t\t\t\t\tif (callback) callback(self, cmd, response.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\tresponseCall(target, cmd, data) {\r\n\r\n\t\t\t\tif (!cmd || !data) return;\r\n\r\n\t\t\t\tlet tempcmd = cmd.toLowerCase();\r\n\r\n\t\t\t\tswitch (tempcmd) {\r\n\t\t\t\t\tcase 'getconfig':\r\n\r\n\t\t\t\t\t\tthis.$refs.baseConfigView.inval(data.data);\r\n\t\t\t\t\t\tthis.$refs.nomalConfigView.inval(data.data);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'getsellconfig':\r\n\t\t\t\t\t\tthis.$refs.nomalConfigView.inval(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'workernum':\r\n\t\t\t\t\t\tthis.$refs.nomalConfigView.inval(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'saveconfig':\r\n\t\t\t\t\t\tif (data.code.toUpperCase() == \"SUCCESS\") {\r\n\t\t\t\t\t\t\tthis.upateConfig();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.noti('保存提示', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'activeconfig':\r\n\t\t\t\t\t\tthis.noti('激活提示', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'delconfig':\r\n\t\t\t\t\t\tthis.upateConfig();\r\n\t\t\t\t\t\tthis.noti('删除提示', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'sellconfig':\r\n\t\t\t\t\t\tthis.noti('修改自动卖出', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'manualsell':\r\n\t\t\t\t\t\tthis.noti('手动卖出', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'sendfee':\r\n\t\t\t\t\t\tthis.noti('发送手续费', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'createworkers':\r\n\t\t\t\t\t\tthis.noti('创建小号', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'batchapprove':\r\n\t\t\t\t\t\tthis.noti('批量授权', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'manualbuy':\r\n\t\t\t\t\t\tthis.noti('手动买入', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'startlisten':\r\n\t\t\t\t\t\tthis.noti('开启监听', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'stoplisten':\r\n\t\t\t\t\t\tthis.noti('停止监听', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'saveconfigonchain':\r\n\t\t\t\t\t\tthis.noti('配置上链', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis.noti('其他操作', data.code);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tnoti(title, msg) {\r\n\t\t\t\tconsole.log(title, msg);\r\n\t\t\t\tif (msg.toUpperCase() == 'SUCCESS') {\r\n\t\t\t\t\tmsg = \"成功执行\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (msg.toUpperCase() == 'INTERNAL_ERROR') {\r\n\t\t\t\t\tmsg = \"未知错误\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (msg.toUpperCase() == 'WEB3_ERROR') {\r\n\t\t\t\t\tmsg = \"WEB3 链上错误\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$notify({\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\tmessage: msg\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tupateConfig() {\r\n\t\t\t\t// this.$emit('submit', 'getConfig', this.form);\r\n\t\t\t\tthis.sendCmd('getConfig', null);\r\n\t\t\t},\r\n\r\n\t\t\tchangeForm(form) {\r\n\t\t\t\tthis.symbol = form.tokenSymbol;\r\n\t\t\t\tthis.symbol2 = form.assetSymbol;\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\t.left {\r\n\t\theight: 100%;\r\n\t\toverflow: auto;\r\n\t}\r\n\r\n\t.view-scroller {\r\n\t\toverflow: auto;\r\n\t}\r\n\r\n\t.toptable {\r\n\t\theight: 300px;\r\n\t}\r\n\r\n\t.t1 {\r\n\t\theight: 300px;\r\n\t\toverflow: hidden;\r\n\t\tborder: 2px solid #afafaf;\r\n\t\tborder-radius: 15px;\r\n\t}\r\n\r\n\t.view-tip {\r\n\t\theight: 300px;\r\n\t\tbackground-color: #dadee6;\r\n\t\tcolor: #409EFF;\r\n\t}\r\n\r\n\t.view-tip h4 {\r\n\t\tmargin-top: 15px;\r\n\t\tmargin-bottom: 8px;\r\n\t\tfont-size: 22px;\r\n\t}\r\n\r\n\t.view-tip-color {\r\n\t\tcolor: #a6090b;\r\n\t\tfont-size: 16px;\r\n\t\tmargin: 0px;\r\n\t}\r\n\r\n\t.view-tip-color span {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #55aaff;\r\n\t}\r\n\r\n\t.bt-sort {\r\n\t\tposition: absolute;\r\n\t\tright: 10px;\r\n\t\ttop: 10px;\r\n\t\tfont-size: 28px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.t-d {\r\n\t\tdisplay: flex;\r\n\t\tmargin-top: 5px;\r\n\t\theight: calc(100% - 310px);\r\n\t\t/* height: 100%; */\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.t2 {\r\n\t\theight: 100%;\r\n\t\tborder: 2px solid #afafaf;\r\n\t\tborder-radius: 15px;\r\n\t\tpadding: 5px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.t3 {\r\n\t\theight: 100%;\r\n\t\tborder: 2px solid #afafaf;\r\n\t\tborder-radius: 15px;\r\n\t\tpadding: 5px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.config-view {\r\n\t\t/* width: 80%; */\r\n\t\t/* transform: translate(10%, 0); */\r\n\t\t/* margin-top: 20px; */\r\n\r\n\t\toverflow: auto;\r\n\t}\r\n\r\n\t.config-nomal {\r\n\t\t/* transform: translate(10%, 0);\r\n\t\twidth: 80%; */\r\n\t\t/* margin-top: 20px; */\r\n\t}\r\n</style>\n"],"sourceRoot":"src/components"}]}